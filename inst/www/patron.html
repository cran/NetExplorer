<!DOCTYPE html style='background-color:grey; width: 100%; height: 100%'>
<head>
  <meta charset='utf-8'>

  <link rel="stylesheet" type="text/css" href="style.css">
  <script>

    function download(){
      const svg = document.querySelector('svg');
const base64doc = btoa(unescape(encodeURIComponent(svg.outerHTML)));
const a = document.createElement('a');
const e = new MouseEvent('click');
a.download = 'download.svg';
a.href = 'data:image/svg+xml;base64,' + base64doc;
a.dispatchEvent(e);
    }
  </script>

<script src='d3.min.js'></script>
<script src='d3-tip.js'></script>




</head>
<body>
  <nav class="main-menu">
    <div class="settings">
      <a href="https://www.s-sosa.com/">
        <img src="logo.jpg" title="Visit s-sosa.com" style="width: 100%; height: 100%;"/>
      </a>
    </div>

    <ul>
<!--Layouts-->
<li class="darkerlishadow">
  <i class="fa fa-lightbulb-o fa-lg"></i>
  <span class="nav-text"><b>Layout</b></span>
</li>


<!--Type-->
<li class="darkerli">
  <i class="fa fa-lightbulb-o fa-lg"></i>
  <span class="nav-text"  style="text-align: center;">Type</span>
</li>
<li class="darkerli">
  <a>
    <i class="fa fa-lightbulb-o fa-lg"></i>
    <span class="nav-text"  style="text-align: center;">
      <div id="dataviz_builtWithD3"></div>
    </span>
  </a>
</li>

<!--Background-->
<li class="darkerli">
  <i class="fa fa-lightbulb-o fa-lg"></i>
  <span class="nav-text"  style="text-align: center;">Background color</span>
</li>
<li class="darkerli">
  <a>
    <i class="fa fa-lightbulb-o fa-lg"></i>
    <span class="nav-text"  style="text-align: center;">
      <input type="color" id="colorWell" name="head"
      value="grey">
      <script>
  var colorWell
  var defaultColor = "#0000ff";
  window.addEventListener("load", startup, false);
  function startup() {
  colorWell = document.querySelector("#colorWell");
  colorWell.value = defaultColor;
  colorWell.addEventListener("input", updateBackground, false);
  colorWell.select();
  }
  function updateBackground(event) {
  document.body.style.backgroundColor =  event.target.value;
  }
                </script>
    </span>
  </a>
</li>

  <!--space-->
  <!--space default layer-->
  <script type="text/javascript">
    var dropdownButton = d3.select("#dataviz_builtWithD3")
    dropdownButton.on("change", function(d) {
      // recover the option that has been chosen
      var selectedLayout = d3.select(this).property("value")
      if(selectedLayout == 'Multilayer'){
        document.getElementById("myspan").style.innerText="Welcome to Studytonight"; //not
        document.getElementById("param layer 1").style.visibility = "hidden";
        document.getElementById("param layer 1").style.display = "none";

        document.getElementById("param layer 2").style.visibility = "hidden";
        document.getElementById("param layer 2").style.display = "none";

      }else{
        document.getElementById("param layer 1").style.visibility = 'visible';
        document.getElementById("param layer 1").style.display = 'block';

        document.getElementById("param layer 2").style.visibility = 'visible';
        document.getElementById("param layer 2").style.display = 'block';
      }
    })
 </script>


  <li class="darkerli"  id = "myspan">
    <i class="fa fa-lightbulb-o fa-lg"></i>
    <span class="nav-text"  style="text-align: center; visibility: visible" >Space</span>
  </li>
  <li class="darkerli" id = "param layer 0.2">
    <a>
      <i class="fa fa-lightbulb-o fa-lg"></i>
      <span class="nav-text"  style="text-align: center;">
       <form>
         <div>
           <span>0</span>
           <input id="sliderNSpace" type="range" min="0" max="100000" oninput="sliderNSpaceV.value=rangeInput.value" value="0" step="any"/>
           <span>100k</span>
           <input id="sliderNSpaceV" type="number" value= "1" min="0" max="100000" oninput="sliderNSpace.value=sliderNSpaceV.value"
           style="border: 0; text-align: center; background-color: #ecebeb;"/>
         </div>
       </form>
       </span>
    </a>
  </li>

  <!--space Multilayer-->
  <li class="darkerli" id = "param layer 1" style="visibility: hidden; display: none;">
      <i class="fa fa-lightbulb-o fa-lg"></i>
      <span class="nav-text"  style="text-align: center;">Horizontal space</span>
  </li>
  <li class="darkerli" style="visibility: hidden; display: none;" id = "param layer 2">
    <a>
      <i class="fa fa-lightbulb-o fa-lg"></i>
      <span class="nav-text"  style="text-align: center;">
       <form>
         <div>
           <span>0</span>
           <input id="sliderNSpaceH" type="range" min="0" max="100000" oninput="sliderNSpaceV.value=rangeInput.value" value="0" step="any"/>
           <span>100k</span>
           <input id="sliderNSpaceVH" type="number" value= "1" min="0" max="100000" oninput="sliderNSpace.value=sliderNSpaceV.value"
           style="border: 0; text-align: center; background-color: #ecebeb;"/>
         </div>
       </form>
       </span>
    </a>
  </li>


        <!--Nodes-->
        <li class="darkerlishadow">
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"><b>Nodes</b></span>
        </li>

      <!--Size-->
      <li class="darkerli">
        <i class="fa fa-lightbulb-o fa-lg"></i>
        <span class="nav-text" style="text-align: center;">Size</span>
      </li>
      <li class="darkerli">
        <a>
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"  style="text-align: center;">
           <form>
             <div>
               <span>0</span>
               <input id="sliderSize" type="range" min="0" max="100000" oninput="sliderSizeV.value=rangeInput.value" value="0" step="any"/>
               <span>100k</span>
               <input id="sliderSizeV" type="number" value= "0" min="0" max="100000" oninput="sliderSize.value=sliderSizeV.value"
               style="border: 0; text-align: center; background-color: #ecebeb;"/>
             </div>
           </form>
          </span>
        </a>
      </li>

      <!--width-->
      <li class="darkerli">
        <i class="fa fa-lightbulb-o fa-lg"></i>
        <span class="nav-text" style="text-align: center;">Border width</span>
      </li>
        <li class="darkerli">
          <a >
            <i class="fa fa-lightbulb-o fa-lg"></i>
            <span class="nav-text"  style="text-align: center;">
             <form>
               <div>
                 <span>0</span>
                 <input id="sliderNWidth" type="range" min="0" max="100000" oninput="sliderNWidthV.value=rangeInput.value" value="0" step="any"/>
                 <span>100k</span>
                 <input id="sliderNWidthV" type="number" value= "0" min="0" max="100000" oninput="sliderNWidth.value=sliderNWidthV.value"
                 style="border: 0; text-align: center; background-color: #ecebeb;"/>
               </div>
             </form>
            </span>
          </a>
        </li>

      <!--Label size-->
      <li class="darkerli">
        <i class="fa fa-lightbulb-o fa-lg"></i>
        <span class="nav-text" style="text-align: center;">Label size</span>
      </li>
      <li class="darkerlishadowdown">
        <a >
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"  style="text-align: center;">
           <form>
             <div>
               <span>0</span>
               <input id="sliderLab" type="range" min="0" max="100000" oninput="sliderLabV.value=rangeInput.value" value="0" step="any"/>
               <span>100k</span>
               <input id="sliderLabV" type="number" value= "0" min="0" max="100000" oninput="sliderLab.value=sliderLabV.value"
               style="border: 0; text-align: center; background-color: #ecebeb;"/>
             </div>
           </form>
          </span>
        </a>
      </li>



        <!--Links-->
        <li class="darkerlishadow">
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"><b>Links</b></span>
        </li>

        <!--width-->
        <li class="darkerli">
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"  style="text-align: center;">Width</span>
        </li>
        <li class="darkerli">
          <a>
            <i class="fa fa-lightbulb-o fa-lg"></i>
            <span class="nav-text"  style="text-align: center;">
             <form>
               <div>
                 <span>0</span>
                 <input id="sliderLWidth" type="range" min="0" max="100000" oninput="sliderLWidthV.value=rangeInput.value" value="1" step="any"/>
                 <span>100k</span>
                 <input id="sliderLWidthV" type="number" value= "1" min="0" max="100000" oninput="sliderLWidth.value=sliderLWidthV.value"
                 style="border: 0; text-align: center; background-color: #ecebeb;"/>
               </div>
             </form>
            </span>
          </a>
        </li>

        <!--opacity-->
        <li class="darkerli">
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"  style="text-align: center;">Opacity</span>
        </li>
        <li class="darkerli">
          <a>
            <i class="fa fa-lightbulb-o fa-lg"></i>
            <span class="nav-text"  style="text-align: center;">
             <form>
               <div>
                 <span>0</span>
                 <input id="sliderLOpacity" type="range" min="0" max="1" oninput="sliderLOpacityV.value=rangeInput.value" value="0.5" step="any"/>
                 <span>1</span>
                 <input id="sliderLOpacityV" type="number" value= "0.5" min="0" max="1" oninput="sliderLOpacity.value=sliderLOpacityV.value"
                 style="border: 0; text-align: center; background-color: #ecebeb;"/>
               </div>
             </form>
            </span>
          </a>
        </li>


        <!--Link curves-->
        <li class="darkerli">
          <i class="fa fa-lightbulb-o fa-lg"></i>
          <span class="nav-text"  style="text-align: center;">Curves</span>
        </li>
        <li class="darkerlishadowdown">
          <a>
            <i class="fa fa-lightbulb-o fa-lg"></i>
            <span class="nav-text"  style="text-align: center;">
             <form>
               <div>
                 <span>0</span>
                 <input id="sliderLCurve" type="range" min="0" max="2" oninput="sliderLCurveV.value=rangeInput.value" value="0.5" step="any"/>
                 <span>2</span>
                 <input id="sliderLCurveV" type="number" value= "0.5" min="0" max="2" oninput="sliderLCurve.value=sliderLCurveV.value"
                 style="border: 0; text-align: center; background-color: #ecebeb;"/>
               </div>
             </form>
            </span>
          </a>
        </li>
        <li style="height: 1%;"></li>

        <!--Save network-->
<li>
  <a href="javascript:download()">
    <img class="fa icon-lg" src="save.png" style="width: 50%;"/>
    <span class="nav-text"><b>Save network</b></span>
  </a>
</li>
    </nav>

  <svg xmlns="https://www.w3.org/2000/svg/" width='100%' height='100%' id = 'net'></svg>
</body>

<!-- D3 function for network-->
<script type='text/javascript'>
  //toolpit declaration
    var tooltip = d3.select('body')
    .append('div')
    .attr('class', 'tooltip')
    .style('opacity', 0);

    function zoomed() {svg.attr('transform', d3.event.transform) }

    opacity = 1


      var graph = getData();


    var margin = {top: 20, right: 20, bottom: 20, left: 20},
    width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
    height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)

    var svg = d3.select('svg')
                .call(d3.zoom().scaleExtent([1/1000, 8]).on('zoom', zoomed))
                .attr('viewBox', '0 0 ' + width + ' ' + height )
                .attr('preserveAspectRatio', 'xMidYMid meet')
                .append('g')
                .call(d3.zoom().scaleExtent([1/1000, 8]).on('zoom', zoomed))
                .call(d3.drag()
                  .on('start', dragstarted)
                  .on('drag', dragged)
                  .on('end', dragended))

    // values for all forces
    forceProperties = {
      center: {
          x: 0.5,
          y: 0.5
      },
        charge: {
            enabled: true,
            strength: -1000,
            distanceMin: 1,
            distanceMax:  100000
        },
        collide: {
            enabled: true,
            strength: 0,
            iterations: 1,
            radius: 1000
        },
        forceX: {
            enabled: false,
            strength: 0.1,
            x: .5
        },
        forceY: {
            enabled: false,
            strength: .1,
            y: .5
        },
        link: {
            enabled: true,
            distance: 5,
            iterations: 1
        }
    }

    simulation = d3.forceSimulation()
        .force('center', d3.forceCenter(width / 2, height / 2)) // setting the center of gravity of the system
        .force('collision', d3.forceCollide(d => 12))
        .force('charge', d3.forceManyBody()
                            .strength(function(d) { return forceProperties.charge.strength; })
                            .distanceMax(forceProperties.charge.distanceMax)
                            .distanceMin(forceProperties.charge.distanceMin)) // making elements attract or repel one another


        .force('collide', d3.forceCollide()
                .radius(function(d) { return forceProperties.collide.radius; })
                .strength(forceProperties.collide.strength )
                .iterations(forceProperties.collide.iterations)
              )

        .force('link', d3.forceLink(link)
                        .id(function(d) { return d.id; })
                        .distance(function(d) { return  forceProperties.link.distance; })
                        .strength(function(d) { return 1; })
        )
        .force('x', d3.forceX().x(function(d) { return d.size;}))
        .force('y', d3.forceY().y(function(d) { return d.size;}))

        .on('tick', ticked);

    var link = svg.selectAll('.link'),
        node = svg.selectAll('.node');

      simulation.nodes(graph.nodes);
      simulation.force('link').links(graph.links);


  // Links -----------------------------------------------
      link = link
        .data(graph.links)
        // Curve
        .enter().append('path')
        // No curve
        //.enter().append('line')
          .attr('class', 'link')
          .style('opacity', function(d) { return d.lOpacity; })
          .style('stroke-width', function(d) { return d.weigth; })
          .style('stroke', function(d) { return d.colorL; })
          .style('fill', 'none') // Curve


  // Nodes -----------------------------------------------
      node = node
        .data(graph.nodes)
        .enter().append('path')
          .attr('class', 'node')
          .attr("d", d3.symbol()
            .type(function(d,i) { return d3.symbols[d.shape]
            })
            .size(function(d){return d.size * 100;})
            )
          .attr('stroke', function(d) { return d.strokeCol; })
          .attr('stroke-width', function(d) { return d.strokeW; })
          .style('fill', function(d) { return d.color; })
          .style('stroke-opacity', function(d) { return d.size; })
          .on("click", releasenode)
          .on('mouseover', focus)
      .on('mouseover.tooltip', function(d) {
        tooltip.transition()
        .duration(300)
        .style('opacity', 0.7);
        tooltip.html(
        'id : '+ d.id + '<p/>strength (size) : '+ d.sizeValue  + '<p/>age (color) : '+ d.colorValue  + '<p/>cort (stroke color): '+ d.strokeColValue  + '<p/>fitness (stroke width): '+ d.strokeWValue  + '<p/>sex (shape): '+ d.shapeValue).style('left', (d3.event.pageX) + 'px')
          .style('top', (d3.event.pageY) + 'px');
        })
        .on('mouseover.fade', fade(0.1))
        .on('mouseout.tooltip', function() {
          tooltip.transition()
          .duration(100)
          .style('opacity', 0);
        })
        .on('mouseout.fade', fade(1))
        .on('mousemove', function() {
          tooltip.style('left', (d3.event.pageX+50) + 'px')
          .style('top', (d3.event.pageY - 28) + 'px');
        })
                .call(d3.drag()
                      .on('start', dragstarted)
                      .on('drag', dragged)
                      .on('end', dragended))

                ;

  // Label ---------------------------------------
  var texts = svg.selectAll('text.label')
              .data(graph.nodes)
              .enter().append('text')
              .attr('class', 'label')
              .attr('fill', 'black')
              .style("font-size",function(d) {  return 10;  })
              .style('text-anchor', 'middle')
              .text(function(d) {  return d.id;  })
              .on('mouseover', focus)
              .on('mouseover.fade', fade(0.1))
              .on('mouseout.fade', fade(1))
              ;

  // Functions------------------
var Layout = 'Force'
var dist = 500
  function ticked(size) {
    graph.nodes.sort(function(x, y){
      return d3.ascending(x.size, y.size);
      })

    if(Layout == 'Circle'){
      graph.nodes.forEach(function(d, i) {
        parts = (2*Math.PI)/graph.nodes.length
        d.x =  width/2 + Math.sin(i*parts)*dist;
        d.y = height/2 + Math.cos(i*parts)*dist;
        })
      }
    if(Layout == 'Linear'){
        graph.nodes.forEach(function(d, i) {
          d.x = i*dist/5 + d.size;
          d.y = height/2;
        })
      }

    if(Layout == "Multilayer"){
      simulation.force('link', d3.forceLink(link)
                        .strength(function(d) { return 0.1; })
        )

        .force('x', d3.forceX().x(function(d) { return 100*Math.random();}))
        .force('y', d3.forceY().y(function(d) { return d.layers*dist;}))
    }

      if(Layout == "Force2"){
         location.reload();
      }


      // Curve
      link.attr('d', function(d) {
        var dx = d.target.x - d.source.x,
            dy = d.target.y - d.source.y,
            dr = Math.sqrt(dx * dx + dy * dy)
        return 'M' + d.source.x + ',' + d.source.y + 'A' + dr + ',' + dr + ' 0 0,1 ' + d.target.x + ',' + d.target.y;
      });

      node.attr('transform', function(d) { return 'translate('+d.x+','+d.y+')'; });

      texts.attr('transform', function(d) { return 'translate('+d.x+','+d.y+')'; });
  }


    function dragstarted(d) {
      if (!d3.event.active) simulation.alphaTarget(0.3).restart()
          d.fx = d.x
          d.fy = d.y
    }

    function dragged(d) {
          d.fx = d3.event.x
          d.fy = d3.event.y
    }

    function dragended(d) {
          if (!d3.event.active) simulation.alphaTarget(0)
              //d.fx = null
              //d.fy = null
              d3.select(this).classed("fixed", d.fixed = true);
    }

    const linkedByIndex = {};
    graph.links.forEach(d => {linkedByIndex[`${d.source.index},${d.target.index}`] = 1;});

    function isConnected(a, b) {return linkedByIndex[`${a.index},${b.index}`] || linkedByIndex[`${b.index},${a.index}`] || a.index === b.index;}

    function fade(opacity) {
              return d => {
                  node.style('stroke-opacity', function (o) {
                      const thisOpacity = isConnected(d, o) ? 1 : opacity;
                      this.setAttribute('fill-opacity', thisOpacity);
                          return thisOpacity;
                      });

                  link.style('stroke-opacity', o => (o.source === d || o.target === d ? 1 : opacity));

                                      texts.style('stroke-opacity', function (o) {
                      const thisOpacity = isConnected(d, o) ? 1 : opacity;
                      this.setAttribute('fill-opacity', thisOpacity);
                          return thisOpacity;
                      });

              };}

    function dragsubject() {
      var i,
      x = transform.invertX(d3.event.x),
      y = transform.invertY(d3.event.y),
      dx,
      dy;
      for (i = tempData.nodes.length - 1; i >= 0; --i) {
        node = tempData.nodes[i];
        dx = x - node.x;
        dy = y - node.y;

        if (dx * dx + dy * dy < radius * radius) {

          node.x =  transform.applyX(node.x);
          node.y = transform.applyY(node.y);

          return node;
        }
      }
    }

    function releasenode(d) {
      d.fx = null;
      d.fy = null;
      simulation.alpha(0.5).restart();
      ticked(dist = 500)
    }

  /* Sliders------------------------------------------------------------------------*/
    /*Node spaces------------------------------------------------------------------------*/
    function changeNodeSpace(size) {
      if(Layout == 'Force'){
        simulation.force('charge', d3.forceManyBody()
                           .strength(function(d) { return forceProperties.charge.strength*size; })
                           .distanceMax(forceProperties.charge.distanceMax)
                           .distanceMin(forceProperties.charge.distanceMin))
     simulation.alpha(0.5).restart();
      }
      if(Layout == 'Linear'){
        var selectedLayout = d3.select(this).property("value")
        ticked(dist = size)
      }
      if(Layout == 'Circle'){
        var selectedLayout = d3.select(this).property("value")
        ticked(dist = size)
      }
      if(Layout == 'Multilayer'){

        simulation.force('link', d3.forceLink(link)
                        .strength(function(d) { return 0; })
        )
        .force('y', d3.forceY().y(function(d) { return d.y * size; }))

        simulation.alpha(0.5).restart();
      }
    }

    d3.select("#sliderNSpace").on("change", function(d){
              selectedValue = this.value
              changeNodeSpace(selectedValue)
    })

    d3.select("#sliderNSpaceV").on("input", function(d){
              selectedValue = this.value
              changeNodeSpace(selectedValue)
    })

    function changeNodeSpaceH(size) {
      if(Layout == 'Multilayer'){

        simulation.force('link', d3.forceLink(link)
                        .strength(function(d) { return 0; })
        )
        .force('X', d3.forceX().x(function(d) { return d.x * size; }))
        simulation.alpha(0.5).restart();
      }
    }

    d3.select("#sliderNSpaceH").on("change", function(d){
              selectedValue = this.value
              changeNodeSpaceH(selectedValue)
    })

    d3.select("#sliderNSpaceVH").on("input", function(d){
              selectedValue = this.value
              changeNodeSpaceH(selectedValue)
    })


    /*Node Size------------------------------------------------------------------------*/
    function changeSize(size) {
              node
              .attr('d', d3.symbol().type( function(d,i) { return d3.symbols[d.shape];} ).size(function(d){return d.size * 100 * size;}))
    }

    d3.select("#sliderSize").on("change", function(d){
              selectedValue = this.value
              changeSize(selectedValue)
    })
    d3.select("#sliderSizeV").on("input", function(d){
              selectedValue = this.value
              changeSize(selectedValue)
    })
    /*Node Width------------------------------------------------------------------------*/
    function changeNwidth(size) {node.attr('stroke-width', function(d) { return d.strokeW * size; })}

    d3.select("#sliderNWidth").on("change", function(d){
              selectedValue = this.value
              changeNwidth(selectedValue)
    })
    d3.select("#sliderNWidthV").on("input", function(d){
              selectedValue = this.value
              changeNwidth(selectedValue)
    })
    /*Node opacity------------------------------------------------------------------------*/
    function changeNop(size) {node.style('stroke-opacity', function(d) { return d.size * size; })}

    d3.select("#sliderNop").on("change", function(d){
              selectedValue = this.value
              changeNop(selectedValue)
    })
    d3.select("#sliderNopV").on("input", function(d){
              selectedValue = this.value
              changeNop(selectedValue)
    })
    /*Label size------------------------------------------------------------------------*/
    function changeLabelSize(size) {texts.style("font-size",function(d) {  return d.size * size;  })}

    d3.select("#sliderLab").on("change", function(d){
              selectedValue = this.value
              changeLabelSize(selectedValue)
    })
    d3.select("#sliderLabV").on("input", function(d){
              selectedValue = this.value
              changeLabelSize(selectedValue)
    })
    /*Links Width ------------------------------------------------------------------------*/
    function changeLwidth(size) {link.style('stroke-width', function(d) { return d.weigth * size; })}

    d3.select("#sliderLWidth").on("change", function(d){
              selectedValue = this.value
              changeLwidth(selectedValue)
    })
    d3.select("#sliderLWidthV").on("input", function(d){
              selectedValue = this.value
              changeLwidth(selectedValue)
    })
      /*Links Opacity------------------------------------------------------------------------*/
      function changeLOpacity(size) {
        link.style('opacity', function(d) { return d.weigth * size; })
      }

      d3.select("#sliderLOpacity").on("change", function(d){
                selectedValue = this.value
                changeLOpacity(selectedValue)
      })
      d3.select("#sliderLOpacityV").on("input", function(d){
              selectedValue = this.value
              changeLOpacity(selectedValue)
    })
      /*Links curves------------------------------------------------------------------------*/
      function changeLCurve(size) {
        if(size == 0){
          link.attr('d', function(d) {
              var dx = d.target.x - d.source.x,
                  dy = d.target.y - d.source.y,
                  dr = Math.sqrt(dx * dx + dy * dy)*100;
              return 'M' + d.source.x + ',' + d.source.y + 'A' + dr + ',' + dr + ' 0 0,1 ' + d.target.x + ',' + d.target.y;
            });
        }
        else{
          link.attr('d', function(d) {
            var dx = d.target.x - d.source.x,
                dy = d.target.y - d.source.y,
                dr = Math.sqrt(dx * dx + dy * dy)/size;
            return 'M' + d.source.x + ',' + d.source.y + 'A' + dr + ',' + dr + ' 0 0,1 ' + d.target.x + ',' + d.target.y;
            });
        }
      }

      d3.select("#sliderLCurve").on("change", function(d){
                selectedValue = this.value
                changeLCurve(selectedValue)
      })
      d3.select("#sliderLCurveV").on("input", function(d){
              selectedValue = this.value
              changeLCurve(selectedValue)
    })
      /*Change Layouts------------------------------------------------------------------------*/
      // Create data = list of groups
      layouts = ["Force", "Circle", "Linear", "Multilayer"]

      // Initialize the button
      var dropdownButton = d3.select("#dataviz_builtWithD3")
          .append('select')

      // add the options to the button
      dropdownButton // Add a button
        .selectAll('myOptions') // Next 4 lines add 6 options = 6 colors
             .data(layouts)
        .enter()
            .append('option')
        .text(function (d) { return d; }) // text showed in the menu
        .attr("value", function (d) { return d; }) // corresponding value returned by the button

        // When the button is changed, run the updateChart function
      dropdownButton.on("change", function(d) {

      // recover the option that has been chosen
      var selectedLayout = d3.select(this).property("value")

      // run the updateChart function with this selected option
          if(selectedLayout == 'Circle'){Layout = 'Circle';simulation.alpha(0.5).restart();}
          if(selectedLayout == 'Linear'){Layout = 'Linear';simulation.alpha(0.5).restart();}
          if(selectedLayout == 'Force'){Layout = 'Force2';simulation.alpha(0.5).restart();}
          if(selectedLayout == 'Multilayer'){Layout = 'Multilayer';simulation.alpha(0.5).restart();}

      })
